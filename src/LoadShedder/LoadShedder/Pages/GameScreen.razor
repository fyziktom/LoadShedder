@page "/gamescreen"

<PageTitle>Load Shedder - Game screen</PageTitle>


<Row Margin="Margin.Is2.FromTop">
    <Column Flex="Flex.JustifyContent.Center">
        <Heading Size="HeadingSize.Is2">Load Shedder Game</Heading>
    </Column>
</Row>

<Row Margin="Margin.Is2.FromTop">
    <Column Flex="Flex.JustifyContent.Center">
       <GameBoardsDropDown IdChanged="onGameBoardChangedHandler" />
    </Column>
</Row>

<BilanceDisplay @ref="bilanceDisplayRef" BoardId="@gameBoardId" />

<Row Margin="Margin.Is2.FromTop.Is2.FromBottom.Is5.FromStart">
    <Column Flex="Flex.JustifyContent.Center">
        <AllGamePiecesKeyboard OnBoardChanged="@onBoardChangedHandler" GameBoardId="@gameBoardId" />
    </Column>
</Row>

@code {
    BilanceDisplay? bilanceDisplayRef;
    private string gameBoardId = "testBoard";

    private async Task onGameBoardChangedHandler(string id)
    {
        if (id != null)
            gameBoardId = id;

        await InvokeAsync(StateHasChanged);
    }

    public async Task onBoardChangedHandler(string message)
    {
        if (bilanceDisplayRef != null)
            await bilanceDisplayRef.Refresh();
    }
}